<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>{% block title %}MisMatch{% endblock %}</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/index.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/dashboard.css') }}">
  {% block extra_css %}{% endblock %}
</head>

<body>
  <header id="header">
    <div class="header-top">
      <a href="/dashboard">
        <img src="{{ url_for('static', filename='images/Logo.png') }}" alt="MisMatch Logo" id="logo">
      </a>
      <h1 class="center-text">Your favorite outfit generator</h1>
      <div class="user-info">
        <span class="username-btn" onclick="toggleUserMenu()">Hello, {{ session.username }}!</span>
        <!-- <a href="/logout" class="logout-btn">Logout</a> -->
        <div class="user-dropdown" id="userDropdown">
           <a href="/settings" class="user-menu-item">Settings</a>
           <a href="/logout" class="user-menu-item">Logout</a>
        </div>
      </div>
    </div>

    <!-- Navigation Bar -->
    <nav class="dashboard-nav">
      <div class="nav-links">
        <a href="/dashboard" class="nav-link {% if active_page == 'generator' %}active{% endif %}">Generator</a>
        <a href="/saved-outfits" class="nav-link {% if active_page == 'saved-outfits' %}active{% endif %}">Saved Outfits</a>
        <a href="/settings" class="nav-link {% if active_page == 'settings' %}active{% endif %}">Settings</a>
      </div>
      
      <!-- Hamburger Menu -->
      <div class="menu-button">
        <button class="hamburger-btn" onclick="toggleHamburgerMenu()">
          <span></span>
          <span></span>
          <span></span>
        </button>
        <div class="dropdown-menu" id="hamburgerMenu">
          <a href="/wardrobe/top" class="menu-item">Tops</a>
          <a href="/wardrobe/bottom" class="menu-item">Bottoms</a>
          <a href="/wardrobe/footwear" class="menu-item">Footwear</a>
        </div>
      </div>
    </nav>
  </header>

  <main id="content">
    {% block content %}
    {% endblock %}
  </main>

  <footer class="site-footer">
    <p>&copy; 2026 <strong>MisMatch</strong> â€” FH Campus Wien</p>
  </footer>

  <script>
    // Toggle User Menu
    function toggleUserMenu() {
      const menu = document.getElementById("userDropdown");
      menu.classList.toggle("show");
    }

    // Toggle Hamburger Menu
    function toggleHamburgerMenu() {
      const menu = document.getElementById("hamburgerMenu");
      menu.classList.toggle("show");
    }

    // Close the menu if clicking outside
    document.addEventListener("click", function (event) {
      const hamburgerMenu = document.getElementById("hamburgerMenu");
      const hamburgerBtn = document.querySelector(".hamburger-btn");
      const userMenu = document.getElementById(".userDropdown");
      const userBtn = document.querySelector(".username-btn")

      if (hamburgerMenu && hamburgerBtn && !hamburgerMenu.contains(event.target) && !hamburgerBtn.contains(event.target)) {
        hamburgerMenu.classList.remove("show");
      }

      if (userMenu && userBtn && !userMenu.contains(event.target) && !userBtn.contains(event.target)) {
        userMenu.classList.remove("show");
      }
    });
  </script>

  {% block extra_js %}{% endblock %}
</body>
</html>